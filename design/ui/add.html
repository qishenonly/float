<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>记一笔 - 完美版</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <style> 
        body { font-family: 'Plus Jakarta Sans', 'Noto Sans SC', sans-serif; } 
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        
        /* 玻璃拟态输入框 */
        .glass-input {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 4px 10px -2px rgba(0, 0, 0, 0.03);
            transition: all 0.2s ease-in-out;
        }
        .glass-input:active { transform: scale(0.99); }

        /* Tab 按钮 */
        .tab-btn { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .tab-active { background-color: white; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05); font-weight: 700; transform: scale(1.05); }
        .tab-inactive { color: #9ca3af; font-weight: 500; }
        
        /* 账户胶囊 - 黑底白字 */
        .account-capsule { transition: all 0.2s; border: 1px solid transparent; }
        .account-capsule.active { 
            background-color: #1f2937 !important;
            color: #ffffff !important; 
            box-shadow: 0 4px 10px rgba(31, 41, 55, 0.3);
            transform: translateY(-1px);
        }

        /* 分类图标 - 选中放大 */
        .category-item .icon-box { transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); }
        .category-item.active .icon-box {
            background-color: #1f2937 !important;
            color: white !important;
            transform: translateY(-5px) scale(1.1);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.15);
        }
        .category-item.active span { color: #1f2937; font-weight: 700; }

        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }

        .blob { position: absolute; filter: blur(60px); z-index: 0; opacity: 0.5; }
    </style>
</head>
<body class="bg-[#F2F4F8] flex items-center justify-center min-h-screen">

    <div class="w-full max-w-[375px] h-[812px] bg-white/80 backdrop-blur-xl shadow-2xl overflow-hidden relative sm:rounded-[40px] flex flex-col border-[6px] border-white">
        
        <div class="blob w-64 h-64 bg-blue-100 rounded-full -top-10 -left-10 mix-blend-multiply"></div>
        <div class="blob w-64 h-64 bg-pink-100 rounded-full bottom-20 -right-10 mix-blend-multiply"></div>

        <div class="px-6 pt-12 pb-2 flex justify-between items-center relative z-20">
            <a href="index.html" class="w-10 h-10 flex items-center justify-center text-gray-400 hover:bg-white rounded-full transition shadow-sm bg-white/50 backdrop-blur-md">
                <i class="fa-solid fa-xmark text-lg"></i>
            </a>
            
            <div class="flex bg-gray-100/80 p-1.5 rounded-2xl backdrop-blur-md">
                <button onclick="switchType('expense')" id="tab-expense" class="tab-btn px-5 py-2 rounded-xl text-xs tab-active text-gray-800">支出</button>
                <button onclick="switchType('income')" id="tab-income" class="tab-btn px-5 py-2 rounded-xl text-xs tab-inactive">收入</button>
                <button onclick="switchType('transfer')" id="tab-transfer" class="tab-btn px-5 py-2 rounded-xl text-xs tab-inactive">转账</button>
            </div>
            
            <div class="w-10"></div>
        </div>

        <div class="px-6 py-6 flex flex-col items-end relative z-10">
            <div class="flex items-center gap-2 mb-1">
                <div class="bg-white/60 px-3 py-1 rounded-full flex items-center gap-2 shadow-sm border border-white/50 backdrop-blur-sm">
                    <div class="w-2 h-2 rounded-full bg-orange-400" id="indicator-dot"></div>
                    <span class="text-[10px] font-bold text-gray-600" id="top-indicator-text">餐饮 · 微信</span>
                </div>
            </div>
            <div class="flex items-baseline w-full justify-end gap-2 text-gray-800 relative">
                <span class="text-3xl font-bold -mb-2 opacity-60">¥</span>
                <input type="number" id="amount-input" placeholder="0.00" autofocus
                    class="w-full text-right text-[3.5rem] font-extrabold bg-transparent outline-none placeholder-gray-200 caret-blue-500 leading-tight tracking-tight"
                    oninput="updateAmountColor(this.value)">
            </div>
        </div>

        <div class="flex-1 overflow-y-auto hide-scrollbar bg-white/50 backdrop-blur-lg rounded-t-[2.5rem] shadow-[0_-10px_40px_rgba(0,0,0,0.03)] relative z-20 pb-24 border-t border-white/60">
            
            <div id="section-standard" class="px-6 py-8 transition-opacity duration-300">
                <div class="mb-8">
                    <div class="flex gap-3 overflow-x-auto hide-scrollbar mx-[-24px] px-[24px] pb-4">
                        <div onclick="selectAccount(this, '微信')" class="account-capsule active flex-shrink-0 px-4 py-2.5 rounded-2xl bg-white border border-gray-100 text-gray-600 text-xs font-bold flex items-center gap-2 cursor-pointer shadow-sm">
                            <i class="fa-brands fa-weixin text-sm"></i> 微信
                        </div>
                        <div onclick="selectAccount(this, '支付宝')" class="account-capsule flex-shrink-0 px-4 py-2.5 rounded-2xl bg-white border border-gray-100 text-gray-600 text-xs font-bold flex items-center gap-2 cursor-pointer shadow-sm">
                            <i class="fa-brands fa-alipay text-blue-500 text-sm"></i> 支付宝
                        </div>
                        <div onclick="selectAccount(this, '招行卡')" class="account-capsule flex-shrink-0 px-4 py-2.5 rounded-2xl bg-white border border-gray-100 text-gray-600 text-xs font-bold flex items-center gap-2 cursor-pointer shadow-sm">
                            <i class="fa-solid fa-credit-card text-red-500 text-sm"></i> 招行卡
                        </div>
                        <div class="w-2 flex-shrink-0"></div>
                    </div>
                </div>

                <div class="mb-8">
                    <p class="text-[10px] text-gray-400 font-bold mb-4 px-1 uppercase tracking-widest">选择分类</p>
                    <div id="expense-categories" class="grid grid-cols-5 gap-y-6 gap-x-2">
                        <div onclick="selectCategory(this, '餐饮')" class="category-item active flex flex-col items-center gap-2 cursor-pointer">
                            <div class="icon-box w-[3.25rem] h-[3.25rem] rounded-[1.2rem] bg-orange-50 text-orange-500 flex items-center justify-center text-xl shadow-sm border border-orange-100/50">
                                <i class="fa-solid fa-utensils"></i>
                            </div>
                            <span class="text-[10px] font-medium text-gray-400">餐饮</span>
                        </div>
                        <div onclick="selectCategory(this, '购物')" class="category-item flex flex-col items-center gap-2 cursor-pointer">
                            <div class="icon-box w-[3.25rem] h-[3.25rem] rounded-[1.2rem] bg-purple-50 text-purple-500 flex items-center justify-center text-xl shadow-sm border border-purple-100/50">
                                <i class="fa-solid fa-bag-shopping"></i>
                            </div>
                            <span class="text-[10px] font-medium text-gray-400">购物</span>
                        </div>
                        <div onclick="selectCategory(this, '交通')" class="category-item flex flex-col items-center gap-2 cursor-pointer">
                            <div class="icon-box w-[3.25rem] h-[3.25rem] rounded-[1.2rem] bg-blue-50 text-blue-500 flex items-center justify-center text-xl shadow-sm border border-blue-100/50">
                                <i class="fa-solid fa-bus"></i>
                            </div>
                            <span class="text-[10px] font-medium text-gray-400">交通</span>
                        </div>
                        <div onclick="selectCategory(this, '住房')" class="category-item flex flex-col items-center gap-2 cursor-pointer">
                            <div class="icon-box w-[3.25rem] h-[3.25rem] rounded-[1.2rem] bg-green-50 text-green-600 flex items-center justify-center text-xl shadow-sm border border-green-100/50">
                                <i class="fa-solid fa-house"></i>
                            </div>
                            <span class="text-[10px] font-medium text-gray-400">住房</span>
                        </div>
                        <div class="category-item flex flex-col items-center gap-2 cursor-pointer opacity-60 hover:opacity-100">
                            <div class="icon-box w-[3.25rem] h-[3.25rem] rounded-[1.2rem] bg-gray-100 text-gray-400 flex items-center justify-center text-xl">
                                <i class="fa-solid fa-ellipsis"></i>
                            </div>
                            <span class="text-[10px] font-medium text-gray-400">更多</span>
                        </div>
                    </div>
                </div>

                <div class="glass-input rounded-2xl p-4 flex flex-col gap-3">
                    <div class="flex items-start gap-3">
                        <div class="mt-1 w-6 h-6 rounded-full bg-gray-100 flex items-center justify-center text-gray-400">
                            <i class="fa-solid fa-pen text-xs"></i>
                        </div>
                        <textarea placeholder="添加备注..." class="w-full text-sm outline-none text-gray-700 bg-transparent h-6 resize-none placeholder-gray-400 font-medium"></textarea>
                    </div>
                    <div class="h-px bg-gray-100 w-full my-1"></div>
                    <div class="flex justify-between items-center">
                        <div class="flex gap-4">
                            <div class="flex items-center gap-1.5 text-gray-500 hover:text-gray-800 cursor-pointer transition group">
                                <i class="fa-regular fa-calendar-check text-sm group-hover:text-blue-500"></i>
                                <span class="text-[10px] font-bold">今天</span>
                            </div>
                            <div class="flex items-center gap-1.5 text-gray-500 hover:text-gray-800 cursor-pointer transition group">
                                <i class="fa-solid fa-hashtag text-sm group-hover:text-blue-500"></i>
                                <span class="text-[10px] font-bold">标签</span>
                            </div>
                            <div class="flex items-center gap-1.5 text-gray-500 hover:text-gray-800 cursor-pointer transition group">
                                <i class="fa-regular fa-image text-sm group-hover:text-blue-500"></i>
                            </div>
                            <div class="flex items-center gap-1.5 text-gray-500 hover:text-gray-800 cursor-pointer transition group">
                                <i class="fa-solid fa-location-dot text-sm group-hover:text-blue-500"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="section-transfer" class="hidden px-6 py-8 mt-2">
                <div class="relative flex flex-col">
                    <div class="glass-input p-4 rounded-t-3xl rounded-b-lg flex items-center justify-between cursor-pointer group hover:bg-white transition relative">
                        <div class="pl-2">
                            <p class="text-[10px] text-gray-400 mb-1 uppercase tracking-wider font-bold">转出 (From)</p>
                            <div class="flex items-center gap-2 font-bold text-gray-800 text-lg">
                                <div class="w-6 h-6 rounded-full bg-green-100 text-green-600 flex items-center justify-center text-xs"><i class="fa-brands fa-weixin"></i></div>
                                微信零钱
                            </div>
                        </div>
                        <i class="fa-solid fa-chevron-right text-gray-300"></i>
                    </div>

                    <div class="h-4 z-20 flex justify-center -my-5">
                         <button class="w-10 h-10 rounded-full bg-white text-gray-600 shadow-md flex items-center justify-center border border-gray-100 hover:rotate-180 transition duration-300">
                            <i class="fa-solid fa-arrow-right-arrow-left rotate-90 text-xs"></i>
                        </button>
                    </div>

                    <div class="glass-input p-4 rounded-t-lg rounded-b-3xl flex items-center justify-between cursor-pointer group hover:bg-white transition mt-2 relative">
                        <div class="pl-2">
                            <p class="text-[10px] text-gray-400 mb-1 uppercase tracking-wider font-bold">转入 (To)</p>
                            <div class="flex items-center gap-2 font-bold text-gray-800 text-lg">
                                <div class="w-6 h-6 rounded-full bg-red-100 text-red-600 flex items-center justify-center text-xs"><i class="fa-solid fa-credit-card"></i></div>
                                招商银行卡
                            </div>
                        </div>
                        <i class="fa-solid fa-chevron-right text-gray-300"></i>
                    </div>

                    <div class="mt-8">
                        <p class="text-[10px] text-gray-400 font-bold mb-4 px-1 uppercase tracking-widest">转账用途</p>
                        <div class="grid grid-cols-5 gap-y-6 gap-x-2">
                            <div onclick="selectCategory(this, '存钱')" class="category-item active flex flex-col items-center gap-2 cursor-pointer">
                                <div class="icon-box w-[3.25rem] h-[3.25rem] rounded-[1.2rem] bg-blue-50 text-blue-500 flex items-center justify-center text-xl shadow-sm border border-blue-100/50">
                                    <i class="fa-solid fa-piggy-bank"></i>
                                </div>
                                <span class="text-[10px] font-medium text-gray-400">存钱</span>
                            </div>
                            <div onclick="selectCategory(this, '还款')" class="category-item flex flex-col items-center gap-2 cursor-pointer">
                                <div class="icon-box w-[3.25rem] h-[3.25rem] rounded-[1.2rem] bg-red-50 text-red-500 flex items-center justify-center text-xl shadow-sm border border-red-100/50">
                                    <i class="fa-solid fa-money-bill-transfer"></i>
                                </div>
                                <span class="text-[10px] font-medium text-gray-400">还款</span>
                            </div>
                            <div onclick="selectCategory(this, '借出')" class="category-item flex flex-col items-center gap-2 cursor-pointer">
                                <div class="icon-box w-[3.25rem] h-[3.25rem] rounded-[1.2rem] bg-gray-100 text-gray-500 flex items-center justify-center text-xl">
                                    <i class="fa-solid fa-hand-holding-dollar"></i>
                                </div>
                                <span class="text-[10px] font-medium text-gray-400">借出</span>
                            </div>
                             <div onclick="selectCategory(this, '给家人')" class="category-item flex flex-col items-center gap-2 cursor-pointer">
                                <div class="icon-box w-[3.25rem] h-[3.25rem] rounded-[1.2rem] bg-pink-50 text-pink-500 flex items-center justify-center text-xl shadow-sm border border-pink-100/50">
                                    <i class="fa-solid fa-users"></i>
                                </div>
                                <span class="text-[10px] font-medium text-gray-400">给家人</span>
                            </div>
                        </div>
                    </div>

                    <div class="glass-input rounded-2xl p-4 flex flex-col gap-3 mt-6">
                        <div class="flex justify-between items-center">
                             <div class="flex items-center gap-3 w-full">
                                <i class="fa-regular fa-calendar text-gray-400"></i>
                                <span class="text-xs font-bold text-gray-700">今天</span>
                                <div class="h-4 w-px bg-gray-200 mx-1"></div>
                                <input type="text" placeholder="转账备注..." class="w-full text-xs bg-transparent outline-none text-gray-700 font-bold">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <div class="absolute bottom-0 w-full px-6 py-6 bg-gradient-to-t from-white via-white/90 to-transparent z-30">
            <button id="btn-submit" class="w-full bg-[#1f2937] text-white font-bold text-lg h-14 rounded-[1.2rem] shadow-xl shadow-gray-200 active:scale-[0.98] transition flex items-center justify-center gap-3 group">
                <span>保存一笔</span>
                <i class="fa-solid fa-arrow-right text-sm opacity-50 group-hover:translate-x-1 transition"></i>
            </button>
        </div>

    </div>

    <script>
        window.onload = function() {
            setTimeout(() => { document.getElementById('amount-input').focus(); }, 300);
        };

        function switchType(type) {
            const btnExpense = document.getElementById('tab-expense');
            const btnIncome = document.getElementById('tab-income');
            const btnTransfer = document.getElementById('tab-transfer');
            const btnSubmit = document.getElementById('btn-submit');
            const sectionStandard = document.getElementById('section-standard');
            const sectionTransfer = document.getElementById('section-transfer');
            const indicatorDot = document.getElementById('indicator-dot');

            [btnExpense, btnIncome, btnTransfer].forEach(btn => {
                btn.className = "tab-btn px-5 py-2 rounded-xl text-xs tab-inactive hover:bg-white/50";
            });

            if (type === 'income') {
                btnIncome.className = "tab-btn px-5 py-2 rounded-xl text-xs tab-active text-green-600";
                btnSubmit.className = "w-full bg-green-500 text-white font-bold text-lg h-14 rounded-[1.2rem] shadow-xl shadow-green-200 active:scale-[0.98] transition flex items-center justify-center gap-3 group";
                indicatorDot.className = "w-2 h-2 rounded-full bg-green-500";
                sectionStandard.classList.remove('hidden');
                sectionTransfer.classList.add('hidden');
            } else if (type === 'transfer') {
                btnTransfer.className = "tab-btn px-5 py-2 rounded-xl text-xs tab-active text-blue-600";
                btnSubmit.className = "w-full bg-blue-500 text-white font-bold text-lg h-14 rounded-[1.2rem] shadow-xl shadow-blue-200 active:scale-[0.98] transition flex items-center justify-center gap-3 group";
                sectionStandard.classList.add('hidden');
                sectionTransfer.classList.remove('hidden');
            } else { // expense
                btnExpense.className = "tab-btn px-5 py-2 rounded-xl text-xs tab-active text-gray-800";
                btnSubmit.className = "w-full bg-[#1f2937] text-white font-bold text-lg h-14 rounded-[1.2rem] shadow-xl shadow-gray-200 active:scale-[0.98] transition flex items-center justify-center gap-3 group";
                indicatorDot.className = "w-2 h-2 rounded-full bg-orange-400";
                sectionStandard.classList.remove('hidden');
                sectionTransfer.classList.add('hidden');
            }
        }

        function selectAccount(element, name) {
            document.querySelectorAll('#section-standard .account-capsule').forEach(el => el.classList.remove('active'));
            element.classList.add('active');
            updateTopIndicator();
        }

        function selectCategory(element, name) {
            // 注意：这里简单处理，实际应区分转账区和支出区的分类active状态
            // 为了演示，我们清除所有 .category-item 的 active
            // 在真实场景中，建议给转账区和支出区不同的 ID 上下文
            const parentSection = element.closest('div[id^="section-"]');
            parentSection.querySelectorAll('.category-item').forEach(el => el.classList.remove('active'));
            element.classList.add('active');
            updateTopIndicator();
        }

        function updateTopIndicator() {
            // 仅在支出/收入模式下更新顶部
            if(!document.getElementById('section-standard').classList.contains('hidden')){
                const cat = document.querySelector('#section-standard .category-item.active span')?.innerText || '未分类';
                const acc = document.querySelector('#section-standard .account-capsule.active')?.innerText || '未选账户';
                document.getElementById('top-indicator-text').innerText = `${cat} · ${acc}`;
            }
        }

        function updateAmountColor(value) {
            const input = document.getElementById('amount-input');
            if (value && parseFloat(value) > 0) {
                input.classList.add('text-gray-900');
            }
        }
    </script>
</body>
</html>